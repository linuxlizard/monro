{% include header.html %}

	<body>
	<div class="container">
		<h1 id="wifi">Router WiFi</h1>
		<h3>{{ timestamp }} </h3>

		<h2>Radios</h2>
		<!-- https://getbootstrap.com/docs/5.1/components/card/#card-groups -->
		<div class="card-group">
			{% for radio in analytics['radio'] %}
			<div class="card">
				<div class="card-header">Radio {{ escape(radio['name']) + " " + escape(radio['macaddr']) }}</div>
				<!-- <div class="card-body text-primary">  -->
				<ul class="list-group list-group-flush">
				<li class="list-group-item">
					<table class="table table-striped">
					<tbody>
						<tr>
							<td>Channel</td>
							<td>???</td>
						</tr>
						<tr>
							<td>Number of Clients</td>
							<td>{{ radio['client_count'] }}</td>
						</tr>
						<tr>
							<td>TX Packets</td>
							<td>{{ radio['tx_packets'] }}</td>
						</tr>
						<tr>
							<td>TX Bytes</td>
							<td>{{ radio['tx_bytes'] }}</td>
						</tr>
						<tr>
							<td>TX Error</td>
							<td>{{ radio['tx_err'] }}</td>
						</tr>
						<tr>
							<td>RX Packets</td>
							<td>{{ radio['rx_packets'] }}</td>
						</tr>
						<tr>
							<td>RX Bytes</td>
							<td>{{ radio['rx_bytes'] }}</td>
						</tr>
						<tr>
							<td>RX Err</td>
							<td>{{ radio['rx_err'] }}</td>
						</tr>
						<tr>
							<td>Auth Attempts</td>
							<td>{{ radio['mlme_auth_attempt'] }} </td>
						</tr>
						<tr>
							<td>Auth Success</td>
							<td>{{ radio['authorize_success'] }} </td>
						</tr>
					</tbody>
					</table>
				</li>
				<li class="list-group-item">
					<table class="table table-striped">
					<tbody>
						{% for vap in radio['bss'] %}
						<tr>
							<td>BSS {{ escape(vap['name']) }} </td>
							<td>
								<a href="bss?radio={{ radio['name'] }}&bssid={{ escape(vap['bssid']) + "&" + request.query }}">{{ escape(vap['bssid']) }}</a> 
							</td>
						</tr>
					 	{% end %}
					</tbody>
					</table>
				</li>
				</ul>
				<!-- </div> -->
			</div>
			{% end %}
		</div>

		<!-- table of all clients -->
		<h2>Clients</h2>
		<table class="table table-striped">
		<thead>
			<tr>
				<td>macaddr</td>
				<td>AP</td>
			</tr>
		</thead>
		<tbody>
		{% for radio in analytics['radio'] %}
			{% for bss in radio['bss'] %}
				{% for client in bss['clients'] %}
					<tr>
						<td><a href="client?radio={{escape(radio['name']) + '&bssid=' + bss['bssid'] + '&macaddr=' + client['macaddr'] + '&' + request.query }}">{{ client['macaddr'] }} </a></td>
						<td>{{ escape(radio['name']) + " " + escape(bss['name']) }} </td>
					</tr>
				{% end %}
			{% end %}
		{% end %}
		</tbody>
		</table>

	</div>

	<script src="https://d3js.org/d3.v6.min.js"></script>
	<script src="/js/graph.js"></script>
	<script src="/js/wifi.js"></script>
	</body>
</html>


